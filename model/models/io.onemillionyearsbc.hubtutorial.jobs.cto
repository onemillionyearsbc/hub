namespace io.onemillionyearsbc.hubtutorial.jobs


asset JobAds identified by email{
  o String      email 
  o Integer     live default=0
  o Integer     posted default=0
  o Integer     remaining default=0
}

asset JobPosting identified by jobReference {
  o String      jobReference 
  o String      email 
  o String      company
  o JobType     jobType
  o Boolean     remote

  o String      jobTitle
  o BlockchainType      blockchainName
  o String      description

  o String      contact
  o String      internalRef
  o Boolean     employer
  o String      salary optional
  o String      location optional // country
  o String      city optional
  o String[]    skills
  
  o String      logohash

  // these are auto calculated in the smart contract
  o DateTime    datePosted
  o DateTime    expiryDate
  o Integer     views
  o Integer     applications

}

enum JobType {
  o FULLTIME
  o CONTRACT
  o PARTTIME
  o INTERNSHIP
  o OTHER
}
  
enum BlockchainType {
  o CORDA
  o ETHEREUM
  o HYPERLEDGER
  o NEO
  o QUOROM
  o RIPPLE
  o OTHER
}

transaction BuyJobCredits {
  o String    email 
  o Integer		credits
}

concept JobPostingParameters {
  o String    jobReference
  o String    email
  o String    company
  o JobType   jobType default = "FULLTIME"
  o Boolean   remote

  o String    jobTitle
  o String    blockchainName default = "ETHEREUM"
  o String    description

  o String      contact
  o String      internalRef
  o Boolean     employer
  o String      salary optional
  o String      location optional
  o String      city optional
  o String[]    skills
  
  o String      logohash

  o Boolean     testData default=false // if set to true will generate random datePosted in the past (for testing)
}
transaction CreateJobPosting {
  o JobPostingParameters params
}

transaction UpdateJobPosting {
  o JobPostingParameters params
}

transaction ExpireJobPosting {
  o String    jobReference
  o String    email
}

enum JobFilterType {
  o ALL
  o LIVE
  o EXPIRING
  o EXPIRED
}

enum EmployerFilterType {
  o AGENCY
  o EMPLOYER
}

enum DateFilterType {
  o THREE
  o SEVEN
  o TWENTYFOUR
}

enum ContractFilterType {
  o PERMANENT
  o CONTRACT
}

enum OnSiteType {
  o REMOTE
  o NONREMOTE
}

@commit(false)
@returns(JobAds)
transaction GetJobAds {
  o String email
}

@commit(false)
@returns(JobPosting[])
transaction GetJobPostings {
  o String email
  o String filterBy
}

@commit(false)
@returns(JobPosting[])
transaction GetJobPostingsDynamic {
  o String email
  o String filterBy optional
  o JobFilterType filterType optional
  o DateTime dateFrom optional
  o DateTime dateTo optional
  o String user optional
  o Integer expiringDays default=5
}

@commit(false)
@returns(JobPosting[])
transaction FilterJobPostingsDynamic {
  o String filterBy default=""
  o String[] filterBySkills optional 
  o String location default=""
  o String city default=""
  o String filterType default=""
  o String dateFilter default=""
  o String employerFilter default=""
  o String jobFilter default=""
  o String onSiteFilter default=""
  o String blockchainFilter default=""
}


@commit(false)
@returns(JobPosting[])
transaction GetPopularEmployers {
}

@commit(false)
@returns(JobPosting[])
transaction GetAllLiveJobPostings {
}

